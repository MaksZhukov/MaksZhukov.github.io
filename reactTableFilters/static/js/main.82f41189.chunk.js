(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{134:function(e,t,n){e.exports=n(231)},229:function(e,t,n){},231:function(e,t,n){"use strict";n.r(t);var a,r=n(0),l=n.n(r),s=n(4),i=n(8),c=n(11),u=n(12),o=n(14),f=n(13),d=n(15),p=n(119),g=n.n(p),h=n(3),b=n.n(h),m=n(46),v=n.n(m),O=n(132),C=n(68),E=n.n(C),j=n(120),y=n.n(j),I=n(121),S=n.n(I),k=n(71),x=n(7),N="**",A="*_",T='""',G="A-Z",w="Z-A",L=300,P=400,D=110,F=100,_=10,R=(n(116),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).handleChangeContext=function(e){var t=n.props;(0,t.changeContexts)({id:t.id,contexts:e})},n.handleChangeDimensions=function(e){var t=n.props;(0,t.changeDimensions)({id:t.id,dimensions:e})},n.handleChangeCell=function(e){var t=e.target,a=n.props;(0,a.changeCells)({id:a.id,cell:t.value})},n.handleChangeCellAll=function(){var e=n.props;(0,e.changeCellsAll)(e.id)},n.handleInputSearch=function(e){var t=e.target,a=n.props;(0,a.inputSearch)({id:a.id,value:t.value})},n.stopDraggableFilters=function(e){e.stopPropagation()},n.handleChangeSearchType=function(e){var t=n.props;(0,t.changeSearchType)({id:t.id,type:e})},n.handleChangeOrderCells=function(){var e=n.props;(0,e.changeOrderCells)(e.id)},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getTables,n=e.id,a=e.responseGetTables;a.status&&"success"===a.status||t(n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.filters,a=t.id;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"filters-header"},"Filters for \u2116"," ",a),l.a.createElement("div",{className:"filters-body"},"CONTEXTS",l.a.createElement("div",{className:"filters-context"},l.a.createElement(E.a,{value:n.get("contexts").toJS(),data:n.get("defaultContexts").toJS(),onChange:this.handleChangeContext})),"DIMENSIONS",l.a.createElement("div",{className:"filters-dimensions"},l.a.createElement(E.a,{value:n.get("dimensions").toJS(),data:n.get("defaultDimensions").toJS(),onChange:this.handleChangeDimensions})),"SEARCH",l.a.createElement("div",{className:"filters-search"},l.a.createElement(S.a,{onMouseDown:this.stopDraggableFilters,onInput:this.handleInputSearch,value:n.getIn(["search","value"]),className:"search-input"}),l.a.createElement("div",{className:"filters-search-type"},l.a.createElement(y.a,{defaultValue:n.getIn(["search","type"]),data:[N,A,T],onChange:this.handleChangeSearchType})),l.a.createElement("button",{type:"button",onClick:this.handleChangeOrderCells},n.get("orderCells"))),"CELLS",l.a.createElement("div",{className:"filters-cells"},n.get("cells").filter(function(e){return e.get("visible")}).size>0&&l.a.createElement("div",{className:"filters-cells-all"},l.a.createElement("label",null,l.a.createElement(k.a,{checked:n.get("checkedAllCells"),onChange:this.handleChangeCellAll}),"\xa0 All")),n.get("cells").filter(function(e){return e.get("visible")}).map(function(t){return l.a.createElement("div",{key:t,className:"filters-cells-cell"},l.a.createElement("label",null,l.a.createElement(k.a,{value:t,checked:t.get("checked"),onChange:e.handleChangeCell}),"\xa0",t.get("value")))}))))}}]),t}(r.PureComponent)),H=n(70),J=n.n(H),M=n(127),z=n(233),B=n(128),U=Object(B.defineAction)("GET_TABLES",["SUCCESS","ERROR","PENDING"]),V=Object(z.a)("ADD_PANEL"),X=Object(z.a)("REMOVE_PANEL"),Z=Object(z.a)(U.SUCCESS),q=Object(z.a)(U.ERROR),W=Object(z.a)(U.PENDING),Y=Object(z.a)("CHANGE_CONTEXTS"),K=Object(z.a)("CHANGE_DIMENSIONS"),Q=Object(z.a)("CHANGE_CELLS"),$=Object(z.a)("CHANGE_CELLS_ALL"),ee=Object(z.a)("INPUT_SEARCH"),te=Object(z.a)("CHANGE_SEARCH_TYPE"),ne=Object(z.a)("CHANGE_ORDER_CELLS"),ae=Object(z.a)("TOGGLE_FILTERS"),re=Object(z.a)("CHANGE_POSITION_PANELS"),le=Object(i.b)(function(e,t){var n=t.id;return{filters:e.get("panels").find(function(e){return e.get("id")===n}).get("filters"),responseGetTables:e.get("panels").find(function(e){return e.get("id")===n}).get("responseGetTables")}},function(e){return{getTables:function(t){return e(function(e){return function(){var t=Object(M.a)(J.a.mark(function t(n){var a;return J.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(W({id:e,responseGetTables:{pending:!0}})),t.next=4,fetch("/data.json").then(function(e){return e.json()}).then(function(e){return e});case 4:a=t.sent,n(Z({id:e,responseGetTables:{pending:!1,status:"success",tables:a,message:"Get tables was success"}})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(q({id:e,responseGetTables:{pending:!1,status:"error",message:"Get tables was error"}}));case 11:case"end":return t.stop()}},t,this,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()}(t))},changeContexts:function(t){var n=t.id,a=t.contexts;return e(Y({id:n,contexts:a}))},changeDimensions:function(t){var n=t.id,a=t.dimensions;return e(K({id:n,dimensions:a}))},changeCells:function(t){var n=t.id,a=t.cell;return e(Q({id:n,cell:a}))},changeCellsAll:function(t){return e($(t))},inputSearch:function(t){var n=t.id,a=t.value;return e(ee({id:n,value:a}))},changeSearchType:function(t){var n=t.id,a=t.type;return e(te({id:n,type:a}))},changeOrderCells:function(t){return e(ne(t))}}})(R),se=n(33),ie=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tables,n=e.checkedAllCells,a=e.id;return l.a.createElement("div",{className:"tables"},t.length>=0&&!n&&t.map(function(e){return l.a.createElement("table",{key:"panel-".concat(a,"-table-").concat(e),className:"table"},l.a.createElement("caption",{className:"table-caption"},e.name),l.a.createElement("thead",null,l.a.createElement("tr",null,e.dimensions.map(function(e){return l.a.createElement("th",{key:e},e)}))),l.a.createElement("tbody",null,e.rows.map(function(e,t){return l.a.createElement("tr",{key:t.toString()},e.map(function(e,t){return l.a.createElement("td",{key:t.toString()},e&&e.value)}))})))}))}}]),t}(r.PureComponent),ce=Object(i.b)(function(e,t){var n=t.id,a=e.get("panels").find(function(e){return e.get("id")===n}),r=a.getIn(["filters","cells"]).filter(function(e){return e.get("checked")}).toJS(),l=a.getIn(["filters","contexts"]).toJS(),s=a.getIn(["filters","dimensions"]).toJS(),i=a.getIn(["filters","checkedAllCells"]),c=[];return l.forEach(function(e){if(0!==r.filter(function(t){return t.parents.context===e}).length){var t=[],n=[];s.forEach(function(a){var l=r.filter(function(t){return t.parents.dimension===a&&t.parents.context===e});0!==l.length&&(t.push(a),n.push(l))});var a=Math.max.apply(Math,Object(se.a)(n.map(function(e){return e.length}))),l=Array(a).fill(null).map(function(){return[]});l.forEach(function(e,t){n.forEach(function(a,r){e.push(n[r][t])})}),c.push({name:e,dimensions:t,rows:l})}}),{tables:c,checkedAllCells:i}})(ie),ue=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).startDragFilter=function(e){document.querySelectorAll(".filters").forEach(function(t){t!==e.currentTarget&&t.classList.remove("has-draggable")}),e.stopPropagation()},n.handleClickToggleFilters=function(){var e=n.props;(0,e.toggleFilters)(e.id)},n.handleClickRemovePanel=function(){var e=n.props;(0,e.removePanel)(e.id)},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isOpenFilters,n=e.id,a=e.x,r=e.y;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"panel"},l.a.createElement("button",{type:"button",className:"btn btn-filter",onClick:this.handleClickToggleFilters},"filter"),l.a.createElement("button",{type:"button",className:"btn",onClick:this.handleClickRemovePanel},"x"),l.a.createElement("span",null,"\u2116"," ",n),l.a.createElement(ce,{id:n}),t&&l.a.createElement(O.a,{node:document&&document.getElementById("portal-filters")},l.a.createElement(v.a,{defaultClassName:b()("react-draggable","has-draggable"),onStart:this.startDragFilter,defaultPosition:{x:a*P+D,y:r*L+F+ +(r>0?_:0)}},l.a.createElement("div",{className:"filters"},l.a.createElement(le,{id:n}))))))}}]),t}(r.PureComponent),oe=Object(i.b)(function(e,t){var n=t.id;return{isOpenFilters:e.get("panels").find(function(e){return e.get("id")===n}).get("isOpenFilters")}},function(e){return{toggleFilters:function(t){return e(ae(t))},removePanel:function(t){return e(X(t))}}})(ue),fe=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).handleGridLayoutChange=function(e){(0,n.props.changePositionPanels)(e)},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.panels,n=e.addPanel;return l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{type:"button",className:"btn",onClick:n},"+"),l.a.createElement(g.a,{className:"panels",cols:4,rowHeight:300,width:1600,onLayoutChange:this.handleGridLayoutChange},t.map(function(e){return l.a.createElement("div",{key:e.get("id"),"data-grid":{x:e.get("x"),y:e.get("y"),w:1,h:1}},l.a.createElement(oe,{x:e.get("x"),y:e.get("y"),id:e.get("id")}))})))}}]),t}(r.PureComponent),de=n(129),pe=Object(de.a)(function(e){return e.get("panels")},function(e){return e}),ge=Object(i.b)(function(e){return{panels:pe(e)}},function(e){return{addPanel:function(){return e(V())},changePositionPanels:function(t){return e(re(t))}}})(fe),he=n(27),be=n(130),me=n(131),ve=n(5),Oe=n(232),Ce=Object(x.c)(JSON.parse(localStorage.getItem("store")))||Object(x.c)({panels:[]}),Ee=Object(Oe.a)((a={},Object(ve.a)(a,V,function(e){var t=e.get("panels"),n=t.push(Object(x.c)({id:(new Date).getTime(),x:t.size>0?t.size%4:0,y:t.size>0?Math.floor(t.size/4):0,isOpenFilters:!1,filters:{defaultContexts:[],contexts:[],defaultDimensions:[],dimensions:[],cells:[],checkedAllCells:!1,orderCells:G,search:{value:"",type:N}},responseGetTables:{}}));return e.set("panels",n)}),Object(ve.a)(a,X,function(e,t){var n=t.payload;return e.set("panels",e.get("panels").filter(function(e){return e.get("id")!==n}))}),Object(ve.a)(a,Z,function(e,t){var n=t.payload,a=n.id,r=n.responseGetTables,l=e.get("panels").map(function(e){if(e.get("id")===a){var t=r.tables;return e.setIn(["filters","defaultContexts"],Object(x.a)(Object.keys(t))).set("responseGetTables",Object(x.c)(r))}return e});return e.set("panels",l)}),Object(ve.a)(a,q,function(e,t){var n=t.payload,a=n.responseGetTables,r=n.id,l=e.get("panels").map(function(e){return e.get("id")===r?e.set("responseGetTables",a):e});return e.set("panels",l)}),Object(ve.a)(a,W,function(e,t){var n=t.payload,a=n.responseGetTables,r=n.id,l=e.get("panels").map(function(e){return e.get("id")===r?e.set("responseGetTables",Object(x.b)(a)):e});return e.set("panels",l)}),Object(ve.a)(a,Y,function(e,t){var n=t.payload,a=n.contexts,r=n.id,l=e.get("panels").map(function(e){if(e.get("id")===r){var t=e.getIn(["responseGetTables","tables"]),n=e.getIn(["filters","dimensions"]),l=e.getIn(["filters","cells"]),s=[],i=[],c=[];return t.forEach(function(e,t){-1!==a.indexOf(t)&&(e.forEach(function(e,t){-1!==n.indexOf(t)&&i.push(t),s.push(t)}),c=Object(se.a)(c).concat(Object(se.a)(l.filter(function(e){return e.getIn(["parents","context"])===t}))))}),e.setIn(["filters","contexts"],Object(x.a)(a)).setIn(["filters","defaultDimensions"],Object(x.a)(s)).setIn(["filters","dimensions"],Object(x.a)(i)).setIn(["filters","cells"],Object(x.c)(c))}return e});return e.set("panels",l)}),Object(ve.a)(a,K,function(e,t){var n=t.payload,a=n.dimensions,r=n.id,l=e.get("panels").map(function(e){if(e.get("id")===r){var t=e.getIn(["responseGetTables","tables"]),n=e.getIn(["filters","cells"]),l=[];return t.forEach(function(e,t){e.forEach(function(e,r){-1!==a.indexOf(r)&&e.forEach(function(e){if(0!==n.size){var a=n.find(function(n){return n.get("value")===e&&n.getIn(["parents","context"])===t&&n.getIn(["parents","dimension"])===r});a?l.push(a):l.push({parents:{dimension:r,context:t},checked:!1,visible:!0,value:e})}else l.push({parents:{dimension:r,context:t},checked:!1,visible:!0,value:e})})})}),e.setIn(["filters","dimensions"],Object(x.a)(a)).setIn(["filters","cells"],Object(x.c)(l))}return e});return e.set("panels",l)}),Object(ve.a)(a,Q,function(e,t){var n=t.payload,a=n.cell,r=n.id,l=e.get("panels").map(function(e){if(e.get("id")===r){var t=e.getIn(["filters","cells"]).indexOf(a);return e.updateIn(["filters","cells",t],function(e){return e.set("checked",!e.get("checked"))}).updateIn(["filters","checkedAllCells"],function(){var t=e.getIn(["filters","cells"]).filter(function(e){return e.get("visible")&&e.get("checked")}).size,n=e.getIn(["filters","cells"]).filter(function(e){return e.get("visible")}).size;return t+(!1===a.get("checked")&&!0===a.get("visible")?1:-1)===n})}return e});return e.set("panels",l)}),Object(ve.a)(a,$,function(e,t){var n=t.payload,a=e.get("panels").map(function(e){return e.get("id")===n?e.getIn(["filters","checkedAllCells"])?e.updateIn(["filters","cells"],function(e){return e.map(function(e){return!0===e.get("visible")?e.set("checked",!1):e})}).updateIn(["filters","checkedAllCells"],function(e){return!e}):e.updateIn(["filters","cells"],function(e){return e.map(function(e){return!0===e.get("visible")?e.set("checked",!0):e})}).updateIn(["filters","checkedAllCells"],function(e){return!e}):e});return e.set("panels",a)}),Object(ve.a)(a,ee,function(e,t){var n=t.payload,a=n.value,r=n.id,l=e.get("panels").map(function(e){if(e.get("id")===r){var t=e.getIn(["filters","search","type"]);if(t===N)return e.updateIn(["filters","cells"],function(e){return e.map(function(e){return-1===e.get("value").toLowerCase().indexOf(a.toLowerCase())?e.set("visible",!1):e.set("visible",!0)})}).updateIn(["filters","search","value"],function(){return a});if(t===T)return e.updateIn(["filters","cells"],function(e){return e.map(function(e){return""!==a&&e.get("value").toLowerCase()!==a.toLowerCase()?e.set("visible",!1):e.set("visible",!0)})}).updateIn(["filters","search","value"],function(){return a});if(t===A)return e.updateIn(["filters","cells"],function(e){return e.map(function(e){return 0!==e.get("value").toLowerCase().indexOf(a.toLowerCase())?e.set("visible",!1):e.set("visible",!0)})}).updateIn(["filters","search","value"],function(){return a})}return e});return e.set("panels",l)}),Object(ve.a)(a,te,function(e,t){var n=t.payload,a=n.type,r=n.id,l=e.get("panels").map(function(e){return e.get("id")===r?e.updateIn(["filters","search","type"],function(){return a}):e});return e.set("panels",l)}),Object(ve.a)(a,ne,function(e,t){var n=t.payload,a=e.get("panels").map(function(e){if(e.get("id")===n){if(e.getIn(["filters","orderCells"])===G)return e.updateIn(["filters","cells"],function(e){return e.sort(function(e,t){return e.get("value")>t.get("value")?1:e.get("value")<t.get("value")?-1:0})}).updateIn(["filters","orderCells"],function(){return w});if(e.getIn(["filters","orderCells"])===w)return e.updateIn(["filters","cells"],function(e){return e.sort(function(e,t){return e.get("value")>t.get("value")?-1:e.get("value")<t.get("value")?1:0})}).updateIn(["filters","orderCells"],function(){return G})}return e});return e.set("panels",a)}),Object(ve.a)(a,ae,function(e,t){var n=t.payload,a=e.get("panels").map(function(e){return e.get("id")===n?e.update("isOpenFilters",function(e){return!e}):e});return e.set("panels",a)}),Object(ve.a)(a,re,function(e,t){var n=t.payload,a=e.get("panels").map(function(e,t){return e.get("x")!==n[t].x||e.get("y")!==n[t].y?e.set("x",n[t].x).set("y",n[t].y):e});return e.set("panels",a)}),a),Ce),je=Object(he.createStore)(Ee,Object(me.composeWithDevTools)(Object(he.applyMiddleware)(be.a)));je.subscribe(function(){return localStorage.setItem("store",JSON.stringify(je.getState()))});var ye=je;n(227),n(229);Object(s.render)(l.a.createElement(i.a,{store:ye},l.a.createElement(ge,null)),document.getElementById("root"))}},[[134,2,1]]]);
//# sourceMappingURL=main.82f41189.chunk.js.map